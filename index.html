<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Amarya &ndash; Your food cooking tutor.</title>
  <link rel="shortcut-icon" href="./images/amarya.png">
  <link rel="icon" href="./images/amarya.png">
  <link rel="stylesheet" href="./dist/css/style.css">
  <style>
    .chat-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background-color: #f9f9f9;
    }
    .chat-message {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    .chat-message p {
      margin: 0;
      padding: 10px;
      border-radius: 5px;
      background-color: #e0e0e0;
    }
    .typing-indicator {
      display: flex;
      align-items: center;
      margin-right: 10px;
    }
    .typing-indicator span {
      display: inline-block;
      width: 8px;
      height: 8px;
      margin: 0 2px;
      border-radius: 50%;
      background-color: #999;
      animation: blink 1s infinite;
    }
    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }
    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }
    @keyframes blink {
      0%, 100% {
        opacity: 0.2;
      }
      50% {
        opacity: 1;
      }
    }
  </style>
</head>
<body class="app">
  <header class="site-header">
    <section class="logo left">
      <img src="./images/crest.png" alt="Amarya Logo">
    </section>
    
    <nav class="site-nav right">
      <li><a href="#">Home</a></li>
      <li><a href="#">Services</a></li>
      <li><a href="#">About Us</a></li>
    </nav>
  </header>
  
  <main class="site-hero text-center">
    <section class="info-section left">
      <h1>Meet Amarya. Your food AI cooking tutor.</h1>
      <p class="description">Amarya is a cross-platform digital assistant that helps you get started with cooking.</p>

      <section class="bot-platforms">
        <h3 class="prompt"></h3>
        
        <a href="https://m.me/amaryabot" class="bot-platform" target="_blank">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.98 5.77V16l2.725-1.495c.727.2 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z" fill-rule="nonzero"/></svg>
          Chat on Messenger
        </a>
      </section>

      <section class="disclaimer">
        <p><b>*</b> Note that Amarya is a work in progress app. </p>
      </section>
    </section>
    
    <section class="realtime-app right">
      <iframe
        src="https://console.api.ai/api-client/demo/embedded/amarya"
        width="100%"
        height="89%"
        frameborder="0"
      >
      </iframe>
    </section>

  </main>

  <section class="modal hidden">
    <h3>Oops. If you're not me and you're seeing this. I'm very sorry :(</h3>
  </section>

  <script src="./src/js/script.js" type="text/javascript" charset="utf-8"></script>

  <script type="text/javascript" charset="utf-8">
    function noscroll() {
      window.scrollTo( 0, 0 );
    }
    // add listener to disable scroll
    if (window.innerWidth > 600) {
      window.addEventListener('scroll', noscroll);
    }

    // Function to generate chatbot response
    function generateResponse(message) {
      // Create a new message element
      const messageElement = document.createElement('div');
      messageElement.classList.add('chat-message');
      
      // Create a typing indicator
      const typingIndicator = document.createElement('div');
      typingIndicator.classList.add('typing-indicator');
      typingIndicator.innerHTML = '<span></span><span></span><span></span>';
      
      // Append the typing indicator to the message element
      messageElement.appendChild(typingIndicator);
      
      // Append the message element to the chat container
      document.querySelector('.chat-container').appendChild(messageElement);

      // Simulate a delay for the typing indicator
      setTimeout(() => {
        // Remove the typing indicator
        typingIndicator.remove();
        
        // Add the actual message content
        const messageContent = document.createElement('p');
        messageContent.textContent = message;
        messageElement.appendChild(messageContent);
        
      }, 1000);
    }
    
    // Function to call TheMealDB API and get recipe details
    async function getRecipe(recipeName) {
      const response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${recipeName}`);
      const data = await response.json();
      return data.meals[0];
    }
    
    // Example usage
    document.addEventListener('DOMContentLoaded', () => {
      generateResponse('Hello! How can I assist you today?');
      
      // Fetch and display recipe details
      getRecipe('Arrabiata').then(meal => {
        const recipeMessage = `Recipe for ${meal.strMeal}:\n\n${meal.strInstructions}`;
        generateResponse(recipeMessage);
      });
    });
  </script>

  <div class="chat-container"></div>

</body>
</html>
