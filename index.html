<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Amarya &ndash; Your food cooking tutor.</title>
  <link rel="shortcut-icon" href="./images/amarya.png">
  <link rel="icon" href="./images/amarya.png">
  <link rel="stylesheet" href="./dist/css/style.css">
  <style>
    .chat-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background-color: #f9f9f9;
    }
    .chat-message {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    .chat-message p {
      margin: 0;
      padding: 10px;
      border-radius: 5px;
      background-color: #e0e0e0;
    }
    .typing-indicator {
      display: flex;
      align-items: center;
      margin-right: 10px;
    }
    .typing-indicator span {
      display: inline-block;
      width: 8px;
      height: 8px;
      margin: 0 2px;
      border-radius: 50%;
      background-color: #999;
      animation: blink 1s infinite;
    }
    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }
    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }
    @keyframes blink {
      0%, 100% {
        opacity: 0.2;
      }
      50% {
        opacity: 1;
      }
    }
  </style>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="app">
  <header class="site-header">
    <section class="logo left">
      <img src="./images/crest.png" alt="Amarya Logo">
    </section>
    
    <nav class="site-nav right">
      <li><a href="#">Home</a></li>
      <li><a href="#">Services</a></li>
      <li><a href="#">About-Us</a></li>
    </nav>
  </header>
  
  <main class="site-hero text-center">
    <section class="info-section left">
      <h1>Meet Amarya. Your food AI cooking tutor.</h1>
      <p class="description">Amarya is a cross-platform digital assistant that helps you get started with cooking.</p>

      <section class="login-section">
        <h3>Login to get started</h3>
        <div id="google-login-button"></div>
        <div id="facebook-login-button"></div>
      </section>

      <section class="profile-section hidden">
        <h3>Your Profile</h3>
        <div id="profile-details"></div>
      </section>

      <section class="bot-platforms hidden">
        <h3 class="prompt">Say Hi to the Chatbot</h3>
        <a href="https://m.me/amaryabot" class="bot-platform" target="_blank">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.98 5.77V16l2.725-1.495c.727.2 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z" fill-rule="nonzero"/></svg>
          Chat on Messenger
        </a>
      </section>

      <section class="disclaimer">
        <p><b>*</b> Note that Amarya is a work in progress project. </p>
      </section>
    </section>
    
    <section class="realtime-app right">
      <iframe
        src="https://console.api.ai/api-client/demo/embedded/amarya"
        width="100%"
        height="89%"
        frameborder="0"
      >
      </iframe>
      <button id="toggle-video">Toggle Live Video</button>
      <div id="live-video" class="hidden">
        <video width="320" height="240" controls>
          <source src="movie.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </section>

  </main>

  <section class="modal hidden">
    <h3>Oops. If you're not me and you're seeing this. I'm very sorry :(</h3>
  </section>

  <script src="./src/js/script.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
    function noscroll() {
      window.scrollTo( 0, 0 );
    }
    if (window.innerWidth > 600) {
      window.addEventListener('scroll', noscroll);
    }

    function generateResponse(message) {
      const messageElement = document.createElement('div');
      messageElement.classList.add('chat-message');
      const typingIndicator = document.createElement('div');
      typingIndicator.classList.add('typing-indicator');
      typingIndicator.innerHTML = '<span></span><span></span><span></span>';
      messageElement.appendChild(typingIndicator);
      document.querySelector('.chat-container').appendChild(messageElement);

      setTimeout(() => {
        typingIndicator.remove();
        const messageContent = document.createElement('p');
        messageContent.textContent = message;
        messageElement.appendChild(messageContent);
      }, 1000);
    }

    document.addEventListener('DOMContentLoaded', () => {
      generateResponse('Hello! How can I assist you today?');
      initializeGoogleLogin();
      initializeFacebookLogin();
      document.getElementById('toggle-video').addEventListener('click', () => {
        document.getElementById('live-video').classList.toggle('hidden');
      });
    });

    function initializeGoogleLogin() {
      gapi.load('auth2', function() {
        gapi.auth2.init({
          client_id: 'YOUR_GOOGLE_CLIENT_ID'
        }).then(function(auth2) {
          auth2.attachClickHandler('google-login-button', {}, function(user) {
            const profile = user.getBasicProfile();
            displayProfile(profile);
          }, function(error) {
            console.log(JSON.stringify(error, undefined, 2));
          });
        });
      });
    }

    function initializeFacebookLogin() {
      FB.init({
        appId: 'YOUR_FACEBOOK_APP_ID',
        cookie: true,
        xfbml: true,
        version: 'v10.0'
      });

      document.getElementById('facebook-login-button').addEventListener('click', function() {
        FB.login(function(response) {
          if (response.authResponse) {
            FB.api('/me', { fields: 'name, email, picture' }, function(profile) {
              displayProfile(profile);
            });
          }
        }, { scope: 'public_profile,email' });
      });
    }

    function displayProfile(profile) {
      const profileSection = document.querySelector('.profile-section');
      profileSection.classList.remove('hidden');
      const profileDetails = document.getElementById('profile-details');
      profileDetails.innerHTML = `
        <p>Name: ${profile.getName ? profile.getName() : profile.name}</p>
        <p>Email: ${profile.getEmail ? profile.getEmail() : profile.email}</p>
        <img src="${profile.getImageUrl ? profile.getImageUrl() : profile.picture.data.url}" alt="Profile Picture">
      `;
      document.querySelector('.bot-platforms').classList.remove('hidden');
    }

    async function handleImageRecognition(file) {
      const formData = new FormData();
      formData.append('file', file);
      try {
        const response = await axios.post('YOUR_AI_IMAGE_RECOGNITION_API_URL', formData, {
          headers: {
            'Content-Type': 'multipart/form-data'
          }
        });
        generateResponse(`AI Image Recognition Result: ${response.data}`);
      } catch (error) {
        console.error('Error with AI image recognition:', error);
      }
    }

    async function getFoodInfo(query) {
      try {
        const response = await axios.get(`YOUR_FOOD_API_URL?q=${query}`);
        generateResponse(`Food Info: ${response.data}`);
      } catch (error) {
        console.error('Error fetching food info:', error);
      }
    }
  </script>
  <div class="chat-container"></div>
</body>
</html>
